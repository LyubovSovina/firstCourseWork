let Size=document.querySelector(".SizeMatrix"),N=Size.value,matrix=[];CreateMatrix(N),Size.oninput=function(){for(let t=0;t<N;t++){var e=document.getElementById("str");e.parentNode.removeChild(e)}N=Size.value,CreateMatrix(N)};let Get=document.querySelector(".Get"),count=0;function AdjugateMatrix(e){let t=e.length,n=[];for(let r=0;r<t;r++){n[r]=[];for(let l=0;l<t;l++){let a=[],i=(r+l)%2==0?1:-1;for(let n=0;n<l;n++){a[n]=[];for(let t=0;t<r;t++)a[n][t]=e[n][t];for(let l=r+1;l<t;l++)a[n][l-1]=e[n][l]}for(let n=l+1;n<t;n++){a[n-1]=[];for(let t=0;t<r;t++)a[n-1][t]=e[n][t];for(let l=r+1;l<t;l++)a[n-1][l-1]=e[n][l]}n[r][l]=i*Determinant(a)}}return n}function Determinant(e){let t=e.length,n=[],r=1,l=0;for(let r=0;r<t;++r){n[r]=[];for(let l=0;l<t;++l)n[r][l]=e[r][l]}for(let e=0;e<t-1;++e){let a=e,i=Math.abs(n[e][e]);for(let r=e+1;r<t;++r){let t=Math.abs(n[r][e]);t>i&&(a=r,i=t)}if(a>e){let t=n[e];n[e]=n[a],n[a]=t,++l}else if(0==i)return i;let o=n[e][e];for(let l=e+1;l<t;++l){let a=n[l][e];n[l][e]=0;for(let i=e+1;i<t;++i)n[l][i]=(n[l][i]*o-n[e][i]*a)/r}r=o}return l%2?-n[t-1][t-1]:n[t-1][t-1]}function CreateMatrix(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++){var r=document.createElement("tr");r.id="str";for(var l=0;l<e;l++){var a=document.createElement("td"),i=document.createElement("input");i.type="number",i.className="Elements",i.value=null,a.appendChild(i),r.appendChild(a)}t.appendChild(r)}document.getElementById("matrix").appendChild(t)}function GetMatrix(e){for(let t=0;t<e;t++){matrix[t]=[];for(let n=0;n<e;n++){let r=document.getElementsByClassName("Elements")[t*e+n];matrix[t][n]=r.value}}}function PrintError(){let e=document.createDocumentFragment(),t=document.createElement("p");t.innerText+="Данная матрица не имеет обратной, т.к. её определитель равен 0.",e.appendChild(t),document.getElementById("result").appendChild(e)}function PrintResult(e,t){let n=document.createDocumentFragment(),r=document.createElement("p");r.innerText+="Обратная матрица — такая матрица, при умножении на которую исходная матрица даёт в результате единичную матрицу.";let l=document.createElement("p");l.innerText+="Квадратная матрица обратима тогда и только тогда, когда она невырождена, то есть её определитель не равен нулю.";let a=document.createElement("p");a.innerText+="Для неквадратных матриц и вырожденных матриц обратных матриц не существует.";let i=document.createElement("p");i.innerText+="Обратная матрица для данной матрицы равна: ";let o=document.createElement("table");for(var d=0;d<t;d++){for(var m=document.createElement("tr"),u=0;u<t;u++){var c=document.createElement("td");c.innerHTML=e[d][u],m.appendChild(c)}o.appendChild(m)}n.appendChild(r),n.appendChild(l),n.appendChild(a),n.appendChild(i),n.appendChild(o),document.getElementById("result").appendChild(n)}Get.onclick=function(){if(0!=count)for(var e=document.getElementById("result");e.firstChild;)e.removeChild(e.firstChild);GetMatrix(N);let t=Determinant(matrix);if(0==t)PrintError();else{matrix=AdjugateMatrix(matrix);for(let e=0;e<N;e++)for(let n=0;n<N;n++)matrix[e][n]/=t;PrintResult(matrix,N)}count++};