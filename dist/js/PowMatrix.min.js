let Size=document.querySelector(".SizeMatrix"),N=Size.value,matrix=[];CreateMatrix(N),Size.oninput=function(){for(let t=0;t<N;t++){var e=document.getElementById("str");e.parentNode.removeChild(e)}N=Size.value,CreateMatrix(N)};let Get=document.querySelector(".Get"),count=0;function MatrixPow(e,t){return 1==e?t:MultiplyMatrix(t,MatrixPow(e-1,t))}function MultiplyMatrix(e,t){let n=e.length,r=e[0].length,l=t.length,a=t[0].length,i=[];if(r!=l)return!1;for(let e=0;e<n;e++)i[e]=[];for(let r=0;r<a;r++)for(let a=0;a<n;a++){let n=0;for(let i=0;i<l;i++)n+=e[a][i]*t[i][r];i[a][r]=n}return i}function CreateMatrix(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++){var r=document.createElement("tr");r.id="str";for(var l=0;l<e;l++){var a=document.createElement("td"),i=document.createElement("input");i.type="number",i.className="Elements",i.value=null,a.appendChild(i),r.appendChild(a)}t.appendChild(r)}document.getElementById("matrix").appendChild(t)}function GetMatrix(e){for(let t=0;t<e;t++){matrix[t]=[];for(let n=0;n<e;n++){let r=document.getElementsByClassName("Elements")[t*e+n];matrix[t][n]=r.value}}}function PrintResult(e,t){let n=document.createDocumentFragment(),r=document.createElement("p");r.innerText+="Формула возведения матрицы в степень работает только для квадратных матриц и натуральной степени.";let l=document.createElement("p");l.innerText+="Другими словами, для того, чтобы выполнить возведение матрицы в степень n нужно умножить её саму на себя n раз.";let a=document.createElement("p");a.innerText+="Итоговая матрица равна: ";let i=document.createElement("table");for(var d=0;d<t;d++){for(var o=document.createElement("tr"),u=0;u<t;u++){var m=document.createElement("td");m.innerHTML=e[d][u],o.appendChild(m)}i.appendChild(o)}n.appendChild(r),n.appendChild(l),n.appendChild(a),n.appendChild(i),document.getElementById("result").appendChild(n)}Get.onclick=function(){if(0!=count)for(var e=document.getElementById("result");e.firstChild;)e.removeChild(e.firstChild);GetMatrix(N),PrintResult(MatrixPow(N,matrix),N),count++};